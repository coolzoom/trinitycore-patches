Gamble in chat .gamble .roulette Edited by spgm Member of Trinitycore for 3.3.3 Rev 8625

diff --git a/src/server/game/Chat/Chat.cpp b/src/server/game/Chat/Chat.cpp
--- a/src/server/game/Chat/Chat.cpp
+++ b/src/server/game/Chat/Chat.cpp
@@ -753,6 +753,10 @@
         { "repairitems",    SEC_GAMEMASTER,     true,  &ChatHandler::HandleRepairitemsCommand,         "", NULL },
         { "waterwalk",      SEC_GAMEMASTER,     false, &ChatHandler::HandleWaterwalkCommand,           "", NULL },
 
+		//Allows your players to gamble for fun and prizes
+        { "gamble",         SEC_PLAYER,         false, &ChatHandler::HandleGambleCommand,              "", NULL },	
+        { "roulette",       SEC_PLAYER,         false, &ChatHandler::HandleRouletteCommand,            "", NULL },
+
         { "freeze",         SEC_MODERATOR,  false, &ChatHandler::HandleFreezeCommand,              "", NULL },
         { "unfreeze",       SEC_MODERATOR,  false, &ChatHandler::HandleUnFreezeCommand,            "", NULL },
         { "listfreeze",     SEC_MODERATOR,  false, &ChatHandler::HandleListFreezeCommand,          "", NULL },
diff --git a/src/server/game/Chat/Chat.h b/src/server/game/Chat/Chat.h
--- a/src/server/game/Chat/Chat.h
+++ b/src/server/game/Chat/Chat.h
@@ -514,6 +514,9 @@
         bool HandleFreezeCommand(const char *args);
         bool HandleUnFreezeCommand(const char *args);
         bool HandleListFreezeCommand(const char* args);
+		//Gamble
+		bool HandleRouletteCommand(const char* args);
+		bool HandleGambleCommand(const char* args);
 
         bool HandleCooldownCommand(const char* args);
         bool HandleUnLearnCommand(const char* args);
diff --git a/src/server/game/Chat/Commands/Level0.cpp b/src/server/game/Chat/Commands/Level0.cpp
--- a/src/server/game/Chat/Commands/Level0.cpp
+++ b/src/server/game/Chat/Commands/Level0.cpp
@@ -90,6 +90,80 @@
     chr->CastSpell(chr,7355,false);
     return true;
 }
+//Allows your players to gamble for fun and prizes
+bool ChatHandler::HandleGambleCommand(const char* args)
+{
+    Player *chr = m_session->GetPlayer();
+
+    char* px = strtok((char*)args, " ");
+
+    if (!px)
+        return false;
+
+    uint32 money = (uint32)atoi(px);
+
+    if (chr->GetMoney() < money)
+    {
+        SendSysMessage("You can not bet with money you do not have!");
+        return true;
+    }
+
+    else
+    {
+        if (money>0)
+        {
+             if (rand()%100 < 50)
+             {
+                  chr->ModifyMoney(money*2);
+                  SendSysMessage("You have won and doubled your bet");
+             }
+             else
+             {
+                  chr->ModifyMoney(-int(money));
+                  SendSysMessage("You have lost");
+             }  
+        }
+    }
+
+    return true;
+}
+
+bool ChatHandler::HandleRouletteCommand(const char* args)
+{
+    Player *chr = m_session->GetPlayer();
+
+    char* px = strtok((char*)args, " ");
+
+    if (!px)
+        return false;
+
+    uint32 money = (uint32)atoi(px);
+
+    if (chr->GetMoney() < money)
+    {
+        SendSysMessage("You can not bet with money you do not have!");
+        return true;
+    }
+
+    else
+    {
+        if (money>0)
+        {
+             if (rand()%36 < 1)
+             {
+                  chr->ModifyMoney(money*36);
+                  SendSysMessage("You have won 36 times your bet, congratulations!");
+             }
+             else
+             {
+                  chr->ModifyMoney(-int(money));
+                  SendSysMessage("You have lost");
+             }  
+        }
+    }
+
+     return true;
+ }
 
 bool ChatHandler::HandleServerInfoCommand(const char* /*args*/)
 {
